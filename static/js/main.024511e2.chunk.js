(this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]=this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]||[]).push([[0],{11:function(e,t,a){e.exports=a(20)},16:function(e,t,a){},19:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(10),i=a.n(l),o=(a(16),a(4)),c=a(6),u=a(1),s=a(3),m=a.n(s),d=a(8),f=a(2),b=Object(n.createContext)(),p=function(){var e=Object(d.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://swapi.dev/api/planets/",e.next=3,fetch("https://swapi.dev/api/planets/");case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=["population","orbital_period","diameter","surface_water","rotation_period"],E={column:"population",comparison:"maior que",value:"0"},O={column:"population",sort:"ASC"},g=[];var j=function(e){var t=e.children,a=Object(n.useState)({}),l=Object(f.a)(a,2),i=l[0],s=l[1],j=Object(n.useState)(),h=Object(f.a)(j,2),N=h[0],y=h[1],w=Object(n.useState)(v),F=Object(f.a)(w,2),x=F[0],C=F[1],S=Object(n.useState)({}),k=Object(f.a)(S,2),R=k[0],_=k[1],B=Object(n.useState)(E),D=Object(f.a)(B,2),P=D[0],q=D[1],A=Object(n.useState)(),I=Object(f.a)(A,2),L=I[0],T=I[1],G=Object(n.useState)([]),J=Object(f.a)(G,2),V=J[0],U=J[1],W=Object(n.useState)([]),X=Object(f.a)(W,2),z=X[0],H=X[1],K=Object(n.useState)(O),M=Object(f.a)(K,2),Q=M[0],Y=M[1],Z=Object(n.useState)(),$=Object(f.a)(Z,2),ee=$[0],te=$[1],ae=function(){var e=i.results;T(L||e),T(e)},ne=function(e){var t=x.filter((function(t){return t!==e})),a=x.filter((function(t){return t===e}));C(Object(u.a)(t)),U((function(e){return[].concat(Object(u.a)(e),Object(u.a)(a))}))},re={data:i,loading:N,getPlanets:function(){var e=Object(d.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.next=3,p();case 3:t=e.sent,s(t),y(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),filterByName:R,handleFilterByName:function(e){var t=e.target.value;_({value:t}),ae()},getNameFiltered:function(){var e,t=null===(e=R.value)||void 0===e?void 0:e.toLowerCase(),a=i.results,n=L||a,r=null===n||void 0===n?void 0:n.filter((function(e){return e.name.toLowerCase().includes(t)}));return r&&T(Object(u.a)(r)),(null===r||void 0===r?void 0:r.length)>0?r:a},filterByNumericValues:P,handleFilterByNumeric:function(e){var t=e.target,a=t.name,n=t.value;q(Object(c.a)(Object(c.a)({},P),{},Object(o.a)({},a,n)))},getNumericFiltered:function(){var e=i.results,t=L||e,a=(g=(g=[].concat(Object(u.a)(z),[P])).slice(1))[g.length-1],n=a.column,r=a.comparison,l=a.value,o=null===t||void 0===t?void 0:t.filter((function(e){return e[n]===l})),c=null===t||void 0===t?void 0:t.filter((function(e){return e[n]>Number(l)})),s=null===t||void 0===t?void 0:t.filter((function(e){return e[n]<Number(l)}));"menor que"===r&&T(Object(u.a)(s)),"maior que"===r&&T(Object(u.a)(c)),"igual a"===r&&T(Object(u.a)(o)),ne(n)},numFilterArray:L,initialRender:ae,updateOptionsFilter:x,filterReset:function(e){e.preventDefault(),T(),U(),C(["population","orbital_period","diameter","surface_water","rotation_period"])},activeFilters:V,activeFilterReset:function(e){var t=e.target.name,a=1!==V.length?V.filter((function(e){return e!==t})):[],n=1!==V.length?V.filter((function(e){return e===t})):[t];U((function(){return Object(u.a)(a)})),g=g.filter((function(e){return e.column!==t})),function(){var e=i.results,t=g,a=t[t.length-1]?t[t.length-1]:{},n=a.column,r=a.comparison,l=a.value;if(t.length>0){var o=null===e||void 0===e?void 0:e.filter((function(e){return e[n]===l})),c=null===e||void 0===e?void 0:e.filter((function(e){return e[n]>Number(l)})),s=null===e||void 0===e?void 0:e.filter((function(e){return e[n]<Number(l)}));"menor que"===r&&T(Object(u.a)(s)),"maior que"===r&&T(Object(u.a)(c)),"igual a"===r&&T(Object(u.a)(o))}else T(Object(u.a)(e));ne(n)}(),C([].concat(Object(u.a)(x),Object(u.a)(n))),q([])},handleGetNumericFilter:function(){H((function(e){return[].concat(Object(u.a)(e),[P])}))},handleColumnsSort:function(e){var t=e.target,a=t.name,n=t.value;Y(Object(c.a)(Object(c.a)({},Q),{},Object(o.a)({},a,n)))},columnsSort:Q,FILTER_OPTIONS:v,getSortData:function(){var e=i.results,t=Q.column,a=Q.sort,n=(L||e).sort((function(e,n){return"DESC"===a?function(e,t){return"unknown"===t?Number("-1"):t-e}(e[t],n[t]):function(e,t){return"unknown"===e?1:"unknown"===t?Number("-1"):e-t}(e[t],n[t])}));T(Object(u.a)(n))},initialData:ee,initialSortRender:function(){var e=i.results,t=L||e,a=null===t||void 0===t?void 0:t.sort((function(e,t){return e.name.localeCompare(t.name)}));te(a)}};return r.a.createElement(b.Provider,{value:re},t)};var h=function(){var e=Object(n.useContext)(b),t=e.filterByName,a=e.handleFilterByName,l=e.handleFilterByNumeric,i=e.getNumericFiltered,o=e.updateOptionsFilter,c=e.activeFilters,u=e.filterReset,s=e.activeFilterReset,m=e.numFilterArray,d=e.handleGetNumericFilter,f=e.handleColumnsSort,p=e.FILTER_OPTIONS,v=e.getSortData;return Object(n.useEffect)((function(){d()}),[m]),r.a.createElement("section",{className:"filters mt-3"},r.a.createElement("div",{className:"name-filter my-3"},r.a.createElement("label",{htmlFor:"search"},r.a.createElement("span",null,"Busca"),r.a.createElement("input",{id:"search","data-testid":"name-filter",value:t.value,onChange:a,className:"form-control bg-transparent text-light border-gray",placeholder:"Insira o nome do planeta..."}))),r.a.createElement("div",{className:"d-flex justify-content-between align-items-end flex-wrap my-3"},r.a.createElement("label",{htmlFor:"columns-filters"},r.a.createElement("span",null,"Filtros"),r.a.createElement("select",{id:"columns-filters",name:"column","data-testid":"column-filter",onChange:l,className:"form-select bg-transparent w-auto text-light me-3 border-gray"},o.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)})))),r.a.createElement("select",{name:"comparison","data-testid":"comparison-filter",onChange:l,className:"form-select bg-transparent w-auto text-light me-3 border-gray"},r.a.createElement("option",null,"maior que"),r.a.createElement("option",null,"menor que"),r.a.createElement("option",null,"igual a")),r.a.createElement("input",{type:"number",name:"value",defaultValue:"0","data-testid":"value-filter",onChange:l,className:"w-100px form-control bg-transparent text-light me-3 border-gray"}),r.a.createElement("button",{type:"button","data-testid":"button-filter",onClick:i,className:"btn btn-outline-warning w-auto me-3 px-4"},"Filtrar"),r.a.createElement("button",{type:"button",onClick:u,"data-testid":"button-remove-filters",className:"btn btn-outline-warning w-auto no-wrap me-3 px-4"},"Remover Filtros"),r.a.createElement("label",{htmlFor:"columns-ordenation",className:"text-light"},r.a.createElement("span",null,"Ordena\xe7\xe3o"),r.a.createElement("select",{id:"columns-ordenation",name:"column","data-testid":"column-sort",onChange:f,className:"form-select bg-transparent w-auto text-light me-3 border-gray"},p.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)})))),r.a.createElement("div",{className:"d-flex flex-column text-light me-3"},r.a.createElement("label",{htmlFor:"column-sort-input-asc"},r.a.createElement("input",{type:"radio","data-testid":"column-sort-input-asc",name:"sort",value:"ASC",onChange:f,className:"me-2"}),"Ascendente"),r.a.createElement("label",{htmlFor:"column-sort-input-desc"},r.a.createElement("input",{type:"radio","data-testid":"column-sort-input-desc",name:"sort",value:"DESC",onChange:f,className:"me-2"}),"Descendente")),r.a.createElement("button",{type:"button","data-testid":"column-sort-button",onClick:v,className:"btn btn-outline-warning px-4"},"Ordenar"),r.a.createElement("div",{className:"d-flex"},null===c||void 0===c?void 0:c.map((function(e,t){return r.a.createElement("div",{key:t,"data-testid":"filter"},r.a.createElement("div",{name:e,className:" btn-active-filter btn-sm position-relative mt-3 me-3 close","aria-label":"Close","aria-hidden":"true"},e,r.a.createElement("button",{type:"button",name:e,onClick:s,className:" position-absolute top-0 start-100 translate-middle badge text-dark bg-warning rounded-pill","aria-hidden":"true"},"X")))})))))};var N=function(){return r.a.createElement("span",null,"Carregando...")};var y=function(){var e=Object(n.useContext)(b),t=e.data,a=e.getPlanets,l=e.loading,i=e.filterByName,o=e.getNameFiltered,c=e.numFilterArray,u=e.nameFilterArray,s=e.initialSortRender,m=e.initialData;Object(n.useEffect)((function(){a()}),[]),Object(n.useEffect)((function(){s()}),[t]),Object(n.useEffect)((function(){o()}),[i]);var d=u||c||m;return l?r.a.createElement(N,null):r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-dark align-middle table-hover mt-3"},r.a.createElement("thead",null,r.a.createElement("tr",null,["Name","Rotation Period","Orbital Period","Diameter","Climate","Gravity","Terrain","Surface Water","Population","Films","Created","Edited","URL"].map((function(e,t){return r.a.createElement("th",{scope:"col",key:t},e)})))),r.a.createElement("tbody",null,null===d||void 0===d?void 0:d.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",{"data-testid":"planet-name"},e.name),r.a.createElement("td",null,e.rotation_period),r.a.createElement("td",null,e.orbital_period),r.a.createElement("td",null,e.diameter),r.a.createElement("td",null,e.climate),r.a.createElement("td",null,e.gravity),r.a.createElement("td",null,e.terrain),r.a.createElement("td",null,e.surface_water),r.a.createElement("td",null,e.population),r.a.createElement("td",null,e.films),r.a.createElement("td",null,e.created),r.a.createElement("td",null,e.edited),r.a.createElement("td",null,e.url))})))))};var w=function(){return r.a.createElement("div",{className:"container py-3"},r.a.createElement(h,null),r.a.createElement(y,null))};var F=function(){return r.a.createElement(j,null,r.a.createElement(w,null))};a(18),a(19);i.a.render(r.a.createElement(F,null),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.024511e2.chunk.js.map