(this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]=this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]||[]).push([[0],{11:function(e,t,a){e.exports=a(20)},16:function(e,t,a){},19:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(10),i=a.n(l),c=(a(16),a(4)),u=a(6),o=a(1),m=a(3),s=a.n(m),d=a(8),f=a(2),p=Object(n.createContext)(),b=function(){var e=Object(d.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://swapi-trybe.herokuapp.com/api/planets/",e.next=3,fetch("https://swapi-trybe.herokuapp.com/api/planets/");case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=["population","orbital_period","diameter","surface_water","rotation_period"],E={column:"population",comparison:"maior que",value:"0"},O={column:"population",sort:"ASC"},j=[];var h=function(e){var t=e.children,a=Object(n.useState)({}),l=Object(f.a)(a,2),i=l[0],m=l[1],h=Object(n.useState)(),g=Object(f.a)(h,2),y=g[0],N=g[1],F=Object(n.useState)(v),C=Object(f.a)(F,2),S=C[0],k=C[1],w=Object(n.useState)({}),R=Object(f.a)(w,2),x=R[0],_=R[1],B=Object(n.useState)(E),D=Object(f.a)(B,2),A=D[0],P=D[1],q=Object(n.useState)(),I=Object(f.a)(q,2),L=I[0],T=I[1],G=Object(n.useState)([]),V=Object(f.a)(G,2),J=V[0],M=V[1],U=Object(n.useState)([]),W=Object(f.a)(U,2),X=W[0],z=W[1],H=Object(n.useState)(O),K=Object(f.a)(H,2),Q=K[0],Y=K[1],Z=Object(n.useState)(),$=Object(f.a)(Z,2),ee=$[0],te=$[1],ae=function(){var e=i.results;T(L||e),T(e)},ne=function(e){var t=S.filter((function(t){return t!==e})),a=S.filter((function(t){return t===e}));k(Object(o.a)(t)),M((function(e){return[].concat(Object(o.a)(e),Object(o.a)(a))}))},re={data:i,loading:y,getPlanets:function(){var e=Object(d.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(!0),e.next=3,b();case 3:t=e.sent,m(t),N(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),filterByName:x,handleFilterByName:function(e){var t=e.target.value;_({value:t}),ae()},getNameFiltered:function(){var e,t=null===(e=x.value)||void 0===e?void 0:e.toLowerCase(),a=i.results,n=L||a,r=null===n||void 0===n?void 0:n.filter((function(e){return e.name.toLowerCase().includes(t)}));return r&&T(Object(o.a)(r)),(null===r||void 0===r?void 0:r.length)>0?r:a},filterByNumericValues:A,handleFilterByNumeric:function(e){var t=e.target,a=t.name,n=t.value;P(Object(u.a)(Object(u.a)({},A),{},Object(c.a)({},a,n)))},getNumericFiltered:function(){var e=i.results,t=L||e,a=(j=(j=[].concat(Object(o.a)(X),[A])).slice(1))[j.length-1],n=a.column,r=a.comparison,l=a.value,c=null===t||void 0===t?void 0:t.filter((function(e){return e[n]===l})),u=null===t||void 0===t?void 0:t.filter((function(e){return e[n]>Number(l)})),m=null===t||void 0===t?void 0:t.filter((function(e){return e[n]<Number(l)}));"menor que"===r&&T(Object(o.a)(m)),"maior que"===r&&T(Object(o.a)(u)),"igual a"===r&&T(Object(o.a)(c)),ne(n)},numFilterArray:L,initialRender:ae,updateOptionsFilter:S,filterReset:function(e){e.preventDefault(),T(),k(["population","orbital_period","diameter","surface_water","rotation_period"])},activeFilters:J,activeFilterReset:function(e){var t=e.target.name,a=1!==J.length?J.filter((function(e){return e!==t})):[],n=1!==J.length?J.filter((function(e){return e===t})):[t];M((function(){return Object(o.a)(a)})),j=j.filter((function(e){return e.column!==t})),function(){var e=i.results,t=j,a=t[t.length-1]?t[t.length-1]:{},n=a.column,r=a.comparison,l=a.value;if(t.length>0){var c=null===e||void 0===e?void 0:e.filter((function(e){return e[n]===l})),u=null===e||void 0===e?void 0:e.filter((function(e){return e[n]>Number(l)})),m=null===e||void 0===e?void 0:e.filter((function(e){return e[n]<Number(l)}));"menor que"===r&&T(Object(o.a)(m)),"maior que"===r&&T(Object(o.a)(u)),"igual a"===r&&T(Object(o.a)(c))}else T(Object(o.a)(e));ne(n)}(),k([].concat(Object(o.a)(S),Object(o.a)(n))),P([])},handleGetNumericFilter:function(){z((function(e){return[].concat(Object(o.a)(e),[A])}))},handleColumnsSort:function(e){var t=e.target,a=t.name,n=t.value;Y(Object(u.a)(Object(u.a)({},Q),{},Object(c.a)({},a,n)))},columnsSort:Q,FILTER_OPTIONS:v,getSortData:function(){var e=i.results,t=Q.column,a=Q.sort,n=(L||e).sort((function(e,n){return"DESC"===a?function(e,t){return"unknown"===t?Number("-1"):t-e}(e[t],n[t]):function(e,t){return"unknown"===e?1:"unknown"===t?Number("-1"):e-t}(e[t],n[t])}));T(Object(o.a)(n))},initialData:ee,initialSortRender:function(){var e=i.results,t=L||e,a=null===t||void 0===t?void 0:t.sort((function(e,t){return e.name.localeCompare(t.name)}));te(a)}};return r.a.createElement(p.Provider,{value:re},t)};var g=function(){var e=Object(n.useContext)(p),t=e.filterByName,a=e.handleFilterByName,l=e.handleFilterByNumeric,i=e.getNumericFiltered,c=e.updateOptionsFilter,u=e.activeFilters,o=e.filterReset,m=e.activeFilterReset,s=e.numFilterArray,d=e.handleGetNumericFilter,f=e.handleColumnsSort,b=e.FILTER_OPTIONS,v=e.getSortData;return Object(n.useEffect)((function(){d()}),[s]),r.a.createElement("section",{className:"filters"},r.a.createElement("div",{className:"name-filter"},r.a.createElement("input",{"data-testid":"name-filter",value:t.value,onChange:a})),r.a.createElement("div",{className:"comparison-filter"},r.a.createElement("select",{name:"column","data-testid":"column-filter",onChange:l},c.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))),r.a.createElement("select",{name:"comparison","data-testid":"comparison-filter",onChange:l},r.a.createElement("option",null,"maior que"),r.a.createElement("option",null,"menor que"),r.a.createElement("option",null,"igual a")),r.a.createElement("input",{type:"number",name:"value",defaultValue:"0","data-testid":"value-filter",onChange:l}),r.a.createElement("button",{type:"button","data-testid":"button-filter",onClick:i},"FILTRAR"),r.a.createElement("button",{type:"button",onClick:o,"data-testid":"button-remove-filters"},"REMOVER FILTROS")),r.a.createElement("div",{className:"columns-sort"},r.a.createElement("select",{name:"column","data-testid":"column-sort",onChange:f},b.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))),r.a.createElement("label",{htmlFor:"column-sort-input-asc"},"Ascendente",r.a.createElement("input",{type:"radio","data-testid":"column-sort-input-asc",name:"sort",value:"ASC",onChange:f})),r.a.createElement("label",{htmlFor:"column-sort-input-desc"},"Descendente",r.a.createElement("input",{type:"radio","data-testid":"column-sort-input-desc",name:"sort",value:"DESC",onChange:f})),r.a.createElement("button",{type:"button","data-testid":"column-sort-button",onClick:v},"Ordenar")),r.a.createElement("div",{className:"active-filters"},null===u||void 0===u?void 0:u.map((function(e,t){return r.a.createElement("div",{key:t,"data-testid":"filter"},r.a.createElement("button",{type:"button",name:e,onClick:m},e,"X"))}))))};var y=function(){return r.a.createElement("span",null,"Carregando...")};var N=function(){var e=Object(n.useContext)(p),t=e.data,a=e.getPlanets,l=e.loading,i=e.filterByName,c=e.getNameFiltered,u=e.numFilterArray,o=e.nameFilterArray,m=e.initialSortRender,s=e.initialData;Object(n.useEffect)((function(){a()}),[]),Object(n.useEffect)((function(){m()}),[t]),Object(n.useEffect)((function(){c()}),[i]);var d=o||u||s;return l?r.a.createElement(y,null):r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-dark align-middle table-hover"},r.a.createElement("thead",null,r.a.createElement("tr",null,["Name","Rotation Period","Orbital Period","Diameter","Climate","Gravity","Terrain","Surface Water","Population","Films","Created","Edited","URL"].map((function(e,t){return r.a.createElement("th",{scope:"col",key:t},e)})))),r.a.createElement("tbody",null,null===d||void 0===d?void 0:d.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",{"data-testid":"planet-name"},e.name),r.a.createElement("td",null,e.rotation_period),r.a.createElement("td",null,e.orbital_period),r.a.createElement("td",null,e.diameter),r.a.createElement("td",null,e.climate),r.a.createElement("td",null,e.gravity),r.a.createElement("td",null,e.terrain),r.a.createElement("td",null,e.surface_water),r.a.createElement("td",null,e.population),r.a.createElement("td",null,e.films),r.a.createElement("td",null,e.created),r.a.createElement("td",null,e.edited),r.a.createElement("td",null,e.url))})))))};var F=function(){return r.a.createElement("div",{className:"container py-3"},r.a.createElement(g,null),r.a.createElement(N,null))};var C=function(){return r.a.createElement(h,null,r.a.createElement(F,null))};a(18),a(19);i.a.render(r.a.createElement(C,null),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.7d35f688.chunk.js.map